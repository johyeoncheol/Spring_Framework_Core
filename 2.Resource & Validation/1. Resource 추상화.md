# Resource 추상화
org.springframework.core.io.Resource

### 추상화란?
필요한 부분, 중요한 부분을 통합하여 하나로 만드는 것을 말합니다.

## 특징
- java.net.URL을 추상화 한 것입니다.
- 스프링 내부에서 많이 사용하는 인터페이스

### java.net.URL
- 여기서 URL은 인터넷 상에서 주소를 표현하는 방법입니다.
- 즉, 웹 상에 존재하는 자원에 접근할 때 사용하는 클래스입니다.

```
URL url = new URL("https://www.naver.com");
URLConnection urlConnection = url.openConnection();
```

## 추상화 한 이유
- 클래스패스 기준으로 리소스 읽어오는 방법이 없다고 합니다.
- ServletContext를 기준으로 상대 경로로 읽어오는 기능 부재
- 새로운 핸들러를 등록하여 특별한 URL 접미사를 만들어 사용할 수는 있지만 구현이 복잡하고 편의성 메소드가 부족하다

## 인터페이스 둘러보기
- 상속 받은 인터페이스
- 주요 메소드
  + getInputStream()
  + exitst()
  + isOpen()
  + getDescription(): 전체 경로 포함한 파일 이름 또는 실제 URL

## 구현체
- UrlResource: java.net.URL 참고, 기본으로 지원하는 프로토콜 http, https, ftp, file, jar
- ClassPathResource: 지원하는 접두어 classpath
- FileSystemResource
- ServletContextResource: 웹 애플리케이션 루트에서 상대 경로로 리소스 찾는다.

## 리소스 읽어오기
- Resource의 타입은 location 문자열과 ApplicationContext의 타입에 따라 결정 된다.
```
@Component
public class AppRunner implements ApplicationRunner {
  
  @Autowried
  ResourceLoader resourceLoader;
  
  @Override
  public void run(ApplicationArguments args) throws Exception {
    var ctx = new ClassPathXmlApplicationContext("test.xml"); //Resource Type : ClassPathResource
    
    Resource resource = resourceLoader.getRosource("text.txt");
    // ResourceLoader자체가 ApplicationContext이다. 만약 이 ApplicationContext가 ClassPathXmlApplicationContext라면 location은 ClassPathXmlApplicationContext 기준으로 Resource를 읽어온다.
  }
}
```
+ ClassPathXmlApplicationContext -> ClassPathResource
+ FileSystemXmlApplicationContext -> FileSystemResource
+ WebApplicationContext -> ServletContextResource
- ApplicationContext의 타입에 상관없이 리소스 타입을 강제하려면 java.net.URL 접두어중 하나를 사용할 수 있다.
+ classpath:me/whiteship/config.xml -> ClassPathResource
+ file:///some/resource/path/config.xml -> FileSystemResource
